# 治理提案

在不常见的情况下，高价值客户可能会因无法控制而被冻结
情况。一个高价值的客户可能有数百个渠道正在被积极使用。
其中一些频道可能有大量用于 ICS 20 的锁定令牌。

如果客户端所代表的链中三分之一的验证者决定串通，
他们可以签署两个有效但相互冲突的标头，每个标头都由另一个三分之一签名
诚实的验证者集。轻客户端现在可以更新为两个有效但相互冲突的
相同高度的标题。轻客户端无法知道哪个头是值得信赖的，因此
提交此类不当行为的证据很可能会导致冻结轻客户端。

除非通过治理提案，否则在任何情况下都不能更新冻结的轻客户端。
由于法定人数的验证者可以签署可能不是有效执行的任意状态根
在状态机中，添加了治理提案以减轻解冻的复杂性
或更新已“卡住”的客户端。如果没有这种机制，验证器集将需要
构造一个状态根来解冻客户端。解冻客户端，重新启用所有渠道
建立在那个客户之上。这可能会导致收回其他损失的资金。

如果信任期已过，Tendermint 轻客户端可能会过期
最后更新。如果中继器停止提交标头以更新客户端，则可能会发生这种情况。

交易对手链的计划外升级也可能导致客户过期。如果对方
链经历了计划外的升级，验证者可能不会对该升级做出承诺
在链 ID 更改之前设置。在这种情况下，最后一个有效更新的验证器集
轻客户端永远不会产生另一个有效的头，因为链 ID 已经改变，这将
最终导致链上轻客户端过期。

如果高价值的轻客户端被冻结、过期或不可更新，
可以提交治理提案以更新此客户端，称为主题客户端。这
提议包括主题的客户端标识符和替代的客户端标识符
客户。轻客户端实现可能会实现自定义更新逻辑，但在大多数情况下，
如果提案通过，主题将更新为替代客户端的最新共识状态。
当受试者受审时，替代客户被用作“替身”。最好的做法是创建
替代客户*在*主题已被冻结后，以避免替代客户也被冻结。
活跃的替代客户端允许在投票期间提交标头，以防止意外过期
一旦提案通过。

# 如何使用治理提案恢复过期的客户端

另请参阅相关文档：[ADR-026, IBC 客户端恢复机制](../architecture/adr-026-ibc-client-recovery-mechanisms.md)

### 前提条件
- 链更新为 ibc-go >= v1.1.0。
- Tendermint 轻客户端的恢复参数设置为“true”（这决定了是否可以使用治理提案）。 如果恢复参数设置为“false”，则恢复将需要自定义迁移代码。
- 同一交易对手链的活跃客户的客户标识符。
- 治理存款。

＃＃ 脚步

＃＃＃ 步骤1

检查客户端是否附加到预期的“chain-id”。 例如，对于代表 Akash 链的过期 Tendermint 客户端，客户端状态在查询客户端状态时如下所示：

```
{
  client_id: 07-tendermint-146
  client_state:
  '@type': /ibc.lightclients.tendermint.v1.ClientState
  allow_update_after_expiry: true
  allow_update_after_misbehaviour: true
  chain_id: akashnet-2
}
```

客户端附加到预期的 Akash `chain-id` 并且恢复参数（`allow_update_after_expiry` 和 `allow_update_after_misbehaviour`）设置为 `true`。

＃＃＃ 第2步

如果链已更新为 ibc-go >= v1.1.0，任何人都可以通过 cli 执行此提交治理提案以恢复客户端：

```
<binary> tx gov submit-proposal update-client <expired-client-id> <active-client-id>
```

`<active-client-id>` 应该是与过期或冻结的客户端在同一链上的客户端标识符。 此客户端标识符应连接到与过期或冻结的客户端相同的链。 这意味着：使用当前用于在两条链之间中继数据包的活动客户端作为替代客户端。

在此之后，只是谁资助治理存款以及相关链是否投赞成票的问题。

## 重要注意事项

请注意，从 ibc-go v1.0.0 开始，将不再允许交易转到过期客户端，因此请至少更新到此版本以防止将来出现类似问题。

另请注意，如果交易另一端的客户端也已过期，则该客户端也需要更新。 此过程仅更新一个客户端。